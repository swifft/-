<view class="index"><view class="uni-tab-bar"><scroll-view class="uni-swiper-tab" scroll-x="{{true}}"><view data-event-opts="{{[['tap',[['tabtap',[0]]]]]}}" class="{{['swiper-tab-list',(tabIndex==0)?'active':'']}}" bindtap="__e">请假</view><view data-event-opts="{{[['tap',[['tabtap',[1]]]]]}}" class="{{['swiper-tab-list',(tabIndex==1)?'active':'']}}" bindtap="__e">教室</view></scroll-view></view><view class="uni-tab-bar"><swiper class="swiper-box" style="{{'background:#f2f2f2;'+('height:'+(swiperheight+'px')+';')}}" current="{{tabIndex}}" data-event-opts="{{[['change',[['tabChange',['$event']]]]]}}" bindchange="__e"><swiper-item><block wx:if="{{$root.g0.length===0}}"><view class="topBox" style="{{'height:'+(swiperheight+'px')+';'}}"><view class="icon"><image src="../../static/index/error.png"></image></view><view class="title">您还没有登录，请登录</view><view class="btn"><button type="primary" size="mini" data-event-opts="{{[['tap',[['goLogin',['$event']]]]]}}" bindtap="__e">去登陆</button></view></view></block><block wx:if="{{userinfo.isattestation==0}}"><view class="topBox" style="{{'height:'+(swiperheight+'px')+';'}}"><view class="icon"><image src="../../static/index/error.png"></image></view><view class="title">您还没有认证，请认证</view><view class="btn"><button type="primary" size="mini" data-event-opts="{{[['tap',[['goAttestation',['$event']]]]]}}" bindtap="__e">去认证</button></view></view></block><block wx:if="{{userinfo.isattestation==1}}"><view class="topBox" style="{{'height:'+(swiperheight+'px')+';'}}"><view class="icon"><image src="../../static/index/error.png"></image></view><view class="title">认证审核中，请稍后再来访问</view></view></block><block wx:if="{{userinfo.isattestation==2}}"><block wx:if="{{userinfo.role=='学生'}}"><block wx:if="{{leaveData==null||leaveData.key==false}}"><view class="one"><view class="title">请 假 条</view><view class="main"><view class="top"><view>尊敬的</view><view><input type="text" placeholder="请填写全名" data-event-opts="{{[['input',[['__set_model',['','superior_name','$event',[]]]]]]}}" value="{{superior_name}}" bindinput="__e"/></view><view>老师</view></view><view class="center"><view class="center_1"><view>您好!我是计信学院</view><view><input type="text" data-event-opts="{{[['input',[['__set_model',['','grade','$event',[]]]]]]}}" value="{{grade}}" bindinput="__e"/></view><view>级</view><view><input type="text" data-event-opts="{{[['input',[['__set_model',['','major','$event',[]]]]]]}}" value="{{major}}" bindinput="__e"/></view><view>{{"专业学生 "+userinfo.name}}</view><view>{{"，学号 "+userinfo.schoolnumber}}</view><view>，因</view><view><input class="center_2" type="text" data-event-opts="{{[['input',[['__set_model',['','reason','$event',[]]]]]]}}" value="{{reason}}" bindinput="__e"/></view><view>原因需请假，时间为</view><block wx:if="{{rangetime.length==0}}"><view style="margin:0 5px;"><button type="default" size="mini" data-event-opts="{{[['tap',[['chooseDate',[1]]]]]}}" bindtap="__e">选择</button></view></block><block wx:else><view data-event-opts="{{[['tap',[['chooseDate',[1]]]]]}}" bindtap="__e">{{rangetime[0]+" 至 "+rangetime[1]}}</view></block><view>，去向地址为</view><view><input class="center_3" type="text" data-event-opts="{{[['input',[['__set_model',['','address','$event',[]]]]]]}}" value="{{address}}" bindinput="__e"/></view><view class="center_4">本人承诺请假期间安全责任自负，恳请批准!</view></view><view class="center_5"><view><view>联系方式:</view><view><input type="text" data-event-opts="{{[['input',[['__set_model',['','phone_number','$event',[]]]]]]}}" value="{{phone_number}}" bindinput="__e"/></view></view></view><view class="center_6"><view>请假人：</view><view>{{''+userinfo.name+''}}</view></view><view class="center_7"><block wx:if="{{date==''}}"><view style="margin:0 5px;"><button type="default" size="mini" data-event-opts="{{[['tap',[['chooseDate',[2]]]]]}}" bindtap="__e">请假日期选择</button></view></block><block wx:else><view data-event-opts="{{[['tap',[['chooseDate',[2]]]]]}}" bindtap="__e">{{date}}</view></block></view><mx-date-picker vue-id="8dd740cc-1" show="{{showPicker}}" type="rangetime" begin-text="离校" end-text="返校" data-event-opts="{{[['^confirm',[['onSelected']]],['^cancel',[['onSelected']]]]}}" bind:confirm="__e" bind:cancel="__e" bind:__l="__l"></mx-date-picker><mx-date-picker vue-id="8dd740cc-2" show="{{showDate}}" type="date" data-event-opts="{{[['^confirm',[['dateSelected']]],['^cancel',[['dateSelected']]]]}}" bind:confirm="__e" bind:cancel="__e" bind:__l="__l"></mx-date-picker></view></view></view><view class="footer"><button type="default" size="mini" data-event-opts="{{[['tap',[['leave_submit',['$event']]]]]}}" bindtap="__e">确认提交</button></view></block><block wx:if="{{leaveData.key==true}}"><view class="leave_success" style="{{'height:'+(swiperheight+'px')+';'}}"><view><image src="../../static/index/success.png"></image></view><view>请假信息已提交，请在<label data-event-opts="{{[['tap',[['goWaitChecked',['$event']]]]]}}" style="color:#007AFF;" bindtap="__e" class="_span">个人中心</label>查看进度</view></view></block></block><block wx:if="{{userinfo.role=='辅导员'}}"><block wx:if="{{teacherLeaveData.length>0}}"><view class="box"><block wx:for="{{$root.l0}}" wx:for-item="item" wx:for-index="index" wx:key="index"><uni-list vue-id="{{'8dd740cc-3-'+index}}" bind:__l="__l" vue-slots="{{['default']}}"><uni-list-item vue-id="{{('8dd740cc-4-'+index)+','+('8dd740cc-3-'+index)}}" title="请假条" rightText="{{item.f0}}" data-event-opts="{{[['^tap',[['lookDetail',['$0','leave'],[[['teacherLeaveData','',index,'_id']]]]]]]}}" bind:tap="__e" bind:__l="__l"></uni-list-item></uni-list></block></view></block><block wx:if="{{teacherLeaveData.length==0}}"><view style="{{'height:'+(swiperheight+'px')+';'}}"><view style="height:100%;width:100%;"><image style="height:100%;width:100%;" src="../../static/my/DefaultPage_1.jpg"></image></view></view></block></block><block wx:if="{{userinfo.role=='副书记'}}"><block wx:if="{{teacherLeaveData.length>0}}"><view class="box"><block wx:for="{{$root.l1}}" wx:for-item="item" wx:for-index="index" wx:key="index"><uni-list vue-id="{{'8dd740cc-5-'+index}}" bind:__l="__l" vue-slots="{{['default']}}"><block wx:if="{{item.$orig.pass=='辅导员审核'&&item.$orig.finish=='未完成'}}"><view><uni-list-item vue-id="{{('8dd740cc-6-'+index)+','+('8dd740cc-5-'+index)}}" title="请假条" rightText="{{item.f1}}" data-event-opts="{{[['^tap',[['lookDetail',['$0','leave'],[[['teacherLeaveData','',index,'_id']]]]]]]}}" bind:tap="__e" bind:__l="__l"></uni-list-item></view></block></uni-list></block></view></block><block wx:if="{{teacherLeaveData.length==0}}"><view style="{{'height:'+(swiperheight+'px')+';'}}"><view style="height:100%;width:100%;"><image style="height:100%;width:100%;" src="../../static/my/DefaultPage_1.jpg"></image></view></view></block></block><block wx:if="{{userinfo.role=='书记'}}"><block wx:if="{{teacherLeaveData.length>0}}"><view class="box"><block wx:for="{{$root.l2}}" wx:for-item="item" wx:for-index="index" wx:key="index"><uni-list vue-id="{{'8dd740cc-7-'+index}}" bind:__l="__l" vue-slots="{{['default']}}"><uni-list-item vue-id="{{('8dd740cc-8-'+index)+','+('8dd740cc-7-'+index)}}" title="请假条" rightText="{{item.f2}}" data-event-opts="{{[['^tap',[['lookDetail',['$0','leave'],[[['teacherLeaveData','',index,'_id']]]]]]]}}" bind:tap="__e" bind:__l="__l"></uni-list-item></uni-list></block></view></block></block><block wx:if="{{userinfo.role=='教务处'}}"><view class="classPublic" style="{{'height:'+(swiperheight+'px')+';'}}"><view class="icon"><image src="../../static/index/forbid.png"></image></view><view class="text">抱歉，您的身份暂不支持此类型服务</view></view></block></block><block wx:if="{{userinfo.isattestation==3}}"><view class="topBox" style="{{'height:'+(swiperheight+'px')+';'}}"><view class="icon"><image src="../../static/index/error.png"></image></view><view class="title">身份认证失败，请重新认证</view><view class="btn"><button type="primary" size="mini" data-event-opts="{{[['tap',[['goAttestation',['$event']]]]]}}" bindtap="__e">去认证</button></view></view></block></swiper-item><swiper-item><block wx:if="{{$root.g1.length===0}}"><view class="topBox" style="{{'height:'+(swiperheight+'px')+';'}}"><view class="icon"><image src="../../static/index/error.png"></image></view><view class="title">您还没有登录，请登录</view><view class="btn"><button type="primary" size="mini" data-event-opts="{{[['tap',[['goLogin',['$event']]]]]}}" bindtap="__e">去登陆</button></view></view></block><block wx:if="{{userinfo.isattestation==0}}"><view class="topBox" style="{{'height:'+(swiperheight+'px')+';'}}"><view class="icon"><image src="../../static/index/error.png" mode></image></view><view class="title">您还没有认证，请认证</view><view class="btn"><button type="primary" size="mini" data-event-opts="{{[['tap',[['goAttestation',['$event']]]]]}}" bindtap="__e">去认证</button></view></view></block><block wx:if="{{userinfo.isattestation==1}}"><view class="topBox" style="{{'height:'+(swiperheight+'px')+';'}}"><view class="icon"><image src="../../static/index/error.png" mode></image></view><view class="title">认证审核中，请稍后再来访问</view></view></block><block wx:if="{{userinfo.isattestation==2}}"><block wx:if="{{userinfo.role=='学生'}}"><block wx:if="{{classInfo==null||classInfo.key==false}}"><view class="classMoudel"><view class="classList"><view class="title">{{'姓名: '+userinfo.name+''}}</view></view><view class="classList"><view class="title">{{'性别: '+userinfo.sex+''}}</view></view><view class="classList"><view class="title">{{'学号: '+userinfo.schoolnumber+''}}</view></view><view class="classList"><view class="title">电话:</view><view class="input"><input type="text" data-event-opts="{{[['input',[['__set_model',['','class_phone','$event',[]]]]]]}}" value="{{class_phone}}" bindinput="__e"/></view></view><view class="classList"><view class="title">用途:</view><view class="input"><input type="text" data-event-opts="{{[['input',[['__set_model',['','purpose','$event',[]]]]]]}}" value="{{purpose}}" bindinput="__e"/></view></view><view class="classList"><view class="title">是否使用多媒体:</view><view class="radio"><radio checked="{{radio}}" data-event-opts="{{[['tap',[['isRadioCheked',['$event']]]]]}}" bindtap="__e"></radio></view></view><view class="lookup"><view class="chooseClass"><view class="chooseClass-1"><uni-combox bind:input="__e" vue-id="8dd740cc-9" label="教室:" candidates="{{candidates}}" placeholder="请选择教室区域" value="{{classposition}}" data-event-opts="{{[['^input',[['__set_model',['','classposition','$event',[]]]]]]}}" bind:__l="__l"></uni-combox></view><view class="chooseClass-2"><uni-combox bind:input="__e" vue-id="8dd740cc-10" label="节数:" candidates="{{candidates_1}}" placeholder="请选择使用时间" value="{{classtime}}" data-event-opts="{{[['^input',[['__set_model',['','classtime','$event',[]]]]]]}}" bind:__l="__l"></uni-combox></view></view><view data-event-opts="{{[['tap',[['lookup',['$event']]]]]}}" class="lookupBtn" bindtap="__e">查询</view></view><block wx:if="{{isclassResult==true}}"><view class="classResult"><view class="classResult_0">为你查询到以下结果：</view><scroll-view class="classResult-1" scroll-y="true"><block wx:for="{{classData}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view><text>{{item}}</text></view></block></scroll-view></view></block></view><view class="footer"><button type="default" size="mini" data-event-opts="{{[['tap',[['class_submit',['$event']]]]]}}" bindtap="__e">确认提交</button></view></block><block wx:if="{{classInfo.key==true}}"><view class="leave_success" style="{{'height:'+(swiperheight+'px')+';'}}"><view><image src="../../static/index/success.png"></image></view><view>请假信息已提交，请在<label data-event-opts="{{[['tap',[['goWaitChecked',['$event']]]]]}}" style="color:#007AFF;" bindtap="__e" class="_span">个人中心</label>查看进度</view></view></block></block><block wx:if="{{userinfo.role=='辅导员'}}"><view class="classPublic" style="{{'height:'+(swiperheight+'px')+';'}}"><view class="icon"><image src="../../static/index/forbid.png"></image></view><view class="text">抱歉，您的身份暂不支持此类型服务</view></view></block><block wx:if="{{userinfo.role=='副书记'}}"><view class="classPublic" style="{{'height:'+(swiperheight+'px')+';'}}"><view class="icon"><image src="../../static/index/forbid.png"></image></view><view class="text">抱歉，您的身份暂不支持此类型服务</view></view></block><block wx:if="{{userinfo.role=='书记'}}"><view class="classPublic" style="{{'height:'+(swiperheight+'px')+';'}}"><view class="icon"><image src="../../static/index/forbid.png"></image></view><view class="text">抱歉，您的身份暂不支持此类型服务</view></view></block><block wx:if="{{userinfo.role=='教务处'}}"><block wx:if="{{classAllData.length>0}}"><view class="box"><block wx:for="{{$root.l3}}" wx:for-item="item" wx:for-index="index" wx:key="index"><uni-list vue-id="{{'8dd740cc-11-'+index}}" bind:__l="__l" vue-slots="{{['default']}}"><uni-list-item vue-id="{{('8dd740cc-12-'+index)+','+('8dd740cc-11-'+index)}}" title="教室申请" rightText="{{item.f3}}" data-event-opts="{{[['^tap',[['lookDetail',['$0','class'],[[['classAllData','',index,'_id']]]]]]]}}" bind:tap="__e" bind:__l="__l"></uni-list-item></uni-list></block></view></block><block wx:if="{{classAllData.length==0}}"><view style="{{'height:'+(swiperheight+'px')+';'}}"><view style="height:100%;width:100%;"><image style="height:100%;width:100%;" src="../../static/my/DefaultPage_1.jpg"></image></view></view></block></block></block><block wx:if="{{userinfo.isattestation==3}}"><view class="topBox" style="{{'height:'+(swiperheight+'px')+';'}}"><view class="icon"><image src="../../static/index/error.png" mode></image></view><view class="title">身份认证失败，请重新认证</view><view class="btn"><button type="primary" size="mini" data-event-opts="{{[['tap',[['goAttestation',['$event']]]]]}}" bindtap="__e">去认证</button></view></view></block></swiper-item></swiper></view></view>