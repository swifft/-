(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/my/attestation/attestation"],{2756:function(e,t,n){"use strict";(function(e){n("16db");s(n("66fd"));var t=s(n("4577"));function s(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])},"2d30":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={data:function(){return{userinfo:{},phoneHeight:0,previewImg:"../../../static/my/previewImg.png",isshow:!0,ishidden:!1,form:{name:"",schoolnumber:""},name_check_success:null,name_check_fail:null,schoolnumber_check_success:null,schoolnumber_check_fail:null,ImgUrl:"",id:""}},onLoad:function(){this.getData()},onReady:function(){this.getHeight()},methods:{getHeight:function(){var t=this;e.getSystemInfo({success:function(e){t.phoneHeight=e.windowHeight}})},getData:function(){var t=this;e.getStorage({key:"userInfo",success:function(e){t.userinfo=e.data,console.log(t.userinfo)},fail:function(e){t.userinfo={}}})},upload:function(){var t=this;e.chooseImage({count:6,sizeType:["original","compressed"],sourceType:["album","camera "],success:function(e){t.previewImg=e.tempFilePaths[0],t.isshow=!1,t.ishidden=!0}})},close:function(){this.previewImg="../../../static/my/previewImg.png",this.isshow=!0,this.ishidden=!1},submit:function(){var t=this;e.showLoading({title:"正在提交审核。。。"}),e.uploadFile({url:"https://gxnudsl.xyz/api/user/attestationUpload",name:"file",filePath:this.previewImg,success:function(n){200==n.statusCode&&(t.ImgUrl=JSON.parse(n.data).data.url,e.getStorage({key:"userInfo",success:function(n){t.id=n.data._id,e.request({url:"https://gxnudsl.xyz/api/user/attestationInfo",method:"POST",data:{id:n.data._id,attestation:t.form.name+"&"+t.form.schoolnumber+"&"+t.ImgUrl},success:function(n){t.userinfo=n.data.res_info,e.setStorage({key:"userInfo",data:t.userinfo,success:function(){e.hideLoading(),e.showToast({title:"信息提交成功",icon:"success",duration:1e3}),setTimeout((function(){e.reLaunch({url:"../my"})}),1e3)}})}})}}))}})},name_check:function(e){var t=new RegExp(/^[\u4E00-\u9FA5]{2,6}$/);t.test(e.detail.value)?(this.name_check_success=!0,this.name_check_fail=!1):(this.name_check_success=!1,this.name_check_fail=!0)},schoolnumber_check:function(e){var t=new RegExp(/^\d{6,12}$/);t.test(e.detail.value)?(this.schoolnumber_check_success=!0,this.schoolnumber_check_fail=!1):(this.schoolnumber_check_success=!1,this.schoolnumber_check_fail=!0)},goAttestation:function(){this.userinfo.isattestation=0}}};t.default=n}).call(this,n("543d")["default"])},4346:function(e,t,n){},4577:function(e,t,n){"use strict";n.r(t);var s=n("8b04"),i=n("5b63");for(var c in i)"default"!==c&&function(e){n.d(t,e,(function(){return i[e]}))}(c);n("4a17");var o,u=n("f0c5"),a=Object(u["a"])(i["default"],s["b"],s["c"],!1,null,null,null,!1,s["a"],o);t["default"]=a.exports},"4a17":function(e,t,n){"use strict";var s=n("4346"),i=n.n(s);i.a},"5b63":function(e,t,n){"use strict";n.r(t);var s=n("2d30"),i=n.n(s);for(var c in s)"default"!==c&&function(e){n.d(t,e,(function(){return s[e]}))}(c);t["default"]=i.a},"8b04":function(e,t,n){"use strict";var s,i=function(){var e=this,t=e.$createElement;e._self._c},c=[];n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return s}))}},[["2756","common/runtime","common/vendor"]]]);