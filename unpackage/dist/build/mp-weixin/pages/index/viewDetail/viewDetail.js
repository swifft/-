(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/viewDetail/viewDetail"],{"0d44":function(a,s,t){"use strict";t.r(s);var e=t("25f9"),i=t.n(e);for(var o in e)"default"!==o&&function(a){t.d(s,a,(function(){return e[a]}))}(o);s["default"]=i.a},"25f9":function(a,s,t){"use strict";(function(a){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var e=i(t("318a"));function i(a){return a&&a.__esModule?a:{default:a}}var o={data:function(){return{id:"",leaveData:{},classData:{},failPassInfo:"",failPassInfo_class:"",type:""}},onLoad:function(a){this.id=a.id,this.type=a.type,"class"==this.type?this.getClassData():this.getLeaveData()},methods:{getLeaveData:function(){var s=this;a.request({data:{id:this.id},method:"POST",url:"https://gxnudsl.xyz/api/leave/getById",success:function(a){200==a.data.status_code&&(s.leaveData=a.data.res_info,console.log(s.leaveData))}})},getClassData:function(){var s=this;a.request({data:{id:this.id},method:"POST",url:"https://gxnudsl.xyz/api/class/getById",success:function(a){200==a.data.status_code&&(s.classData=a.data.res_info,console.log(s.classData))}})},pass:function(){var s=this,t=(0,e.default)(this.leaveData.rangetime[1]).format("x")-(0,e.default)(this.leaveData.rangetime[0]).format("x"),i=e.default.duration(t);i.days()<=3?a.request({data:{id:this.id,pass:"辅导员审核",finish:"完成",key:!1},method:"POST",url:"https://gxnudsl.xyz/api/leave/leaveEdit",success:function(t){200==t.data.status_code&&(s.leaveData=t.data.res_info,console.log(s.leaveData),a.showToast({title:"提交成功",icon:"success",duration:1e3}))}}):i.days()<7?"请假条提交"==this.leaveData.pass?a.request({data:{id:this.id,pass:"辅导员审核",finish:"未完成",key:!0,superior_name:"副书记"},method:"POST",url:"https://gxnudsl.xyz/api/leave/leaveEdit",success:function(t){200==t.data.status_code&&(s.leaveData=t.data.res_info,console.log(s.leaveData),a.showToast({title:"提交成功",icon:"success",duration:1e3}))}}):"辅导员审核"==this.leaveData.pass&&a.request({data:{id:this.id,pass:"副书记审核",finish:"完成",key:!1},method:"POST",url:"https://gxnudsl.xyz/api/leave/leaveEdit",success:function(t){200==t.data.status_code&&(s.leaveData=t.data.res_info,console.log(s.leaveData),a.showToast({title:"提交成功",icon:"success",duration:1e3}))}}):"请假条提交"==this.leaveData.pass?a.request({data:{id:this.id,pass:"辅导员审核",finish:"未完成",key:!0,superior_name:"副书记"},method:"POST",url:"https://gxnudsl.xyz/api/leave/leaveEdit",success:function(t){200==t.data.status_code&&(s.leaveData=t.data.res_info,console.log(s.leaveData),a.showToast({title:"提交成功",icon:"success",duration:1e3}))}}):"辅导员审核"==this.leaveData.pass?a.request({data:{id:this.id,pass:"副书记审核",finish:"未完成",key:!0,superior_name:"书记"},method:"POST",url:"https://gxnudsl.xyz/api/leave/leaveEdit",success:function(t){200==t.data.status_code&&(s.leaveData=t.data.res_info,console.log(s.leaveData),a.showToast({title:"提交成功",icon:"success",duration:1e3}))}}):"副书记审核"==this.leaveData.pass&&a.request({data:{id:this.id,pass:"书记审核",finish:"完成",key:!1},method:"POST",url:"https://gxnudsl.xyz/api/leave/leaveEdit",success:function(t){200==t.data.status_code&&(s.leaveData=t.data.res_info,console.log(s.leaveData),a.request({data:{id:s.leaveData.Uid._id,leaveInfo:s.leaveData.leaveInfo,superior_name:s.leaveData.superior_name,pass:s.leaveData.pass,rangetime:s.leaveData.rangetime,finish:s.leaveData.finish,key:s.leaveData.key,failPassInfo:s.leaveData.failPassInfo},method:"POST",url:"https://gxnudsl.xyz/api/leaveKeep/save",success:function(s){200==s.data.status_code&&a.showToast({title:"提交成功",icon:"success",duration:1e3})}}))}})},classpass:function(){var s=this;a.request({data:{id:this.id,pass:"教务处审核",finish:"完成",key:!1},method:"POST",url:"https://gxnudsl.xyz/api/class/classEdit",success:function(t){200==t.data.status_code&&(s.classData=t.data.res_info,console.log(s.classData),a.showToast({title:"提交成功",icon:"success",duration:1e3}))}})},openPopup:function(){this.$refs.failPassInfo.open()},classPopup:function(){this.$refs.failPassInfo_class.open()},failPass:function(s){var t=this;this.failPassInfo=s.detail.value,console.log(this.failPassInfo),this.$refs.failPassInfo.close(),this.failPassInfo.length>0?"请假条提交"==this.leaveData.pass?a.request({data:{id:this.id,pass:"辅导员审核失败",finish:"完成",key:!1,failPassInfo:this.failPassInfo},method:"POST",url:"https://gxnudsl.xyz/api/leave/leaveEdit",success:function(s){200==s.data.status_code&&(t.leaveData=s.data.res_info,console.log(t.leaveData),a.showToast({title:"提交成功",icon:"success",duration:1e3}))}}):"辅导员审核"==this.leaveData.pass?a.request({data:{id:this.id,pass:"副书记审核失败",finish:"完成",key:!1,failPassInfo:this.failPassInfo},method:"POST",url:"https://gxnudsl.xyz/api/leave/leaveEdit",success:function(s){200==s.data.status_code&&(t.leaveData=s.data.res_info,console.log(t.leaveData),a.showToast({title:"提交成功",icon:"success",duration:1e3}))}}):(this.leaveData.pass,a.request({data:{id:this.id,pass:"书记审核失败",finish:"完成",key:!1,failPassInfo:this.failPassInfo},method:"POST",url:"https://gxnudsl.xyz/api/leave/leaveEdit",success:function(s){200==s.data.status_code&&(t.leaveData=s.data.res_info,console.log(t.leaveData),a.showToast({title:"提交成功",icon:"success",duration:1e3}))}})):a.showToast({title:"理由不能为空",icon:"none",duration:1e3})},failPass_class:function(s){var t=this;this.failPassInfo_class=s.detail.value,console.log(this.failPassInfo),this.$refs.failPassInfo_class.close(),this.failPassInfo_class.length>0?a.request({data:{id:this.id,pass:"教务处审核失败",finish:"完成",key:!1,failPassInfo:this.failPassInfo_class},method:"POST",url:"https://gxnudsl.xyz/api/class/classEdit",success:function(s){200==s.data.status_code&&(t.classData=s.data.res_info,console.log(t.classData),a.showToast({title:"提交成功",icon:"success",duration:1e3}))}}):a.showToast({title:"理由不能为空",icon:"none",duration:1e3})}}};s.default=o}).call(this,t("543d")["default"])},"3e95":function(a,s,t){"use strict";var e={uniPopup:function(){return Promise.all([t.e("common/vendor"),t.e("components/uni-popup/uni-popup")]).then(t.bind(null,"97ea"))}},i=function(){var a=this,s=a.$createElement,t=(a._self._c,a._f("choice")(a.classData.isMedia));a.$mp.data=Object.assign({},{$root:{f0:t}})},o=[];t.d(s,"b",(function(){return i})),t.d(s,"c",(function(){return o})),t.d(s,"a",(function(){return e}))},4961:function(a,s,t){},"6ab3":function(a,s,t){"use strict";(function(a){t("16db");e(t("66fd"));var s=e(t("e3e6"));function e(a){return a&&a.__esModule?a:{default:a}}a(s.default)}).call(this,t("543d")["createPage"])},b031:function(a,s,t){"use strict";var e=t("4961"),i=t.n(e);i.a},e3e6:function(a,s,t){"use strict";t.r(s);var e=t("3e95"),i=t("0d44");for(var o in i)"default"!==o&&function(a){t.d(s,a,(function(){return i[a]}))}(o);t("b031");var n,l=t("f0c5"),u=Object(l["a"])(i["default"],e["b"],e["c"],!1,null,null,null,!1,e["a"],n);s["default"]=u.exports}},[["6ab3","common/runtime","common/vendor"]]]);